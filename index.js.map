{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = \"53361153-f145cef477c4ac6c9fc0f0a0c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport function fetchImages(query, page) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  return fetch(url).then(response => {\n    if (!response.ok) throw new Error(\"Network error\");\n    return response.json();\n  });\n}","export function renderGallery(images) {\n  const gallery = document.querySelector(\".gallery\");\n  gallery.innerHTML = images\n    .map(\n      img => `\n    <li class=\"item\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" width=\"200\" height=\"150\"/>\n    </li>`\n    )\n    .join(\"\");\n}\n\nexport function appendGallery(images) {\n  const gallery = document.querySelector(\".gallery\");\n  gallery.insertAdjacentHTML(\n    \"beforeend\",\n    images\n      .map(\n        img => `\n      <li class=\"item\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" width=\"200\" height=\"150\"/>\n      </li>`\n      )\n      .join(\"\")\n  );\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, appendGallery } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst endMessage = document.querySelector(\".end-message\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.query.value.trim();\n\n  if (!query) {\n    alert(\"Enter search text\");\n    return;\n  }\n\n  page = 1;\n  gallery.innerHTML = \"\";\n  hideLoadMore();\n  hideEndMessage();\n  showLoader();\n\n  fetchImages(query, page)\n    .then(data => {\n      totalHits = data.totalHits;\n\n      renderGallery(data.hits);\n\n      if (data.hits.length === 0) {\n        hideLoadMore();\n        return;\n      }\n\n      if (page * perPage >= totalHits) {\n        showEndMessage();\n      } else {\n        showLoadMore();\n      }\n    })\n    .catch(() => alert(\"Error loading images\"))\n    .finally(hideLoader);\n}\n\nfunction onLoadMore() {\n  page += 1;\n  hideLoadMore();\n  showLoader();\n\n  fetchImages(query, page)\n    .then(data => {\n      appendGallery(data.hits);\n\n      if (page * perPage >= totalHits) {\n        hideLoadMore();\n        showEndMessage();\n      } else {\n        showLoadMore();\n      }\n    })\n    .catch(() => alert(\"Error loading\"))\n    .finally(hideLoader);\n}\n\nfunction showLoader() {\n  loader.classList.remove(\"hidden\");\n}\nfunction hideLoader() {\n  loader.classList.add(\"hidden\");\n}\nfunction showLoadMore() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\nfunction hideLoadMore() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\nfunction showEndMessage() {\n  endMessage.classList.remove(\"hidden\");\n}\nfunction hideEndMessage() {\n  endMessage.classList.add(\"hidden\");\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","url","response","renderGallery","images","gallery","img","appendGallery","form","loader","loadMoreBtn","endMessage","perPage","totalHits","onSearch","onLoadMore","event","hideLoadMore","hideEndMessage","showLoader","data","showEndMessage","showLoadMore","hideLoader"],"mappings":"ssBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,SAASC,EAAYC,EAAOC,EAAM,CACvC,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACJ,CAAG,iEAAiEC,CAAI,eAEtE,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAM,eAAe,EACjD,OAAOA,EAAS,KAAI,CACtB,CAAC,CACH,CCZO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAYD,EACjB,IACCE,GAAO;AAAA;AAAA,kBAEKA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA,UAEpD,EACK,KAAK,EAAE,CACZ,CAEO,SAASC,EAAcH,EAAQ,CACpB,SAAS,cAAc,UAAU,EACzC,mBACN,YACAA,EACG,IACCE,GAAO;AAAA;AAAA,oBAEKA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA,YAEtD,EACO,KAAK,EAAE,CACd,CACA,CCtBA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIZ,EAAQ,GACRC,EAAO,EACX,MAAMY,EAAU,GAChB,IAAIC,EAAY,EAEhBL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,SAASD,EAASE,EAAO,CAIvB,GAHAA,EAAM,eAAc,EACpBjB,EAAQiB,EAAM,cAAc,SAAS,MAAM,MAAM,KAAI,EAEjD,CAACjB,EAAO,CACV,MAAM,mBAAmB,EACzB,MACF,CAEAC,EAAO,EACPK,EAAQ,UAAY,GACpBY,EAAY,EACZC,EAAc,EACdC,EAAU,EAEVrB,EAAYC,EAAOC,CAAI,EACpB,KAAKoB,GAAQ,CAKZ,GAJAP,EAAYO,EAAK,UAEjBjB,EAAciB,EAAK,IAAI,EAEnBA,EAAK,KAAK,SAAW,EAAG,CAC1BH,EAAY,EACZ,MACF,CAEIjB,EAAOY,GAAWC,EACpBQ,EAAc,EAEdC,EAAY,CAEhB,CAAC,EACA,MAAM,IAAM,MAAM,sBAAsB,CAAC,EACzC,QAAQC,CAAU,CACvB,CAEA,SAASR,GAAa,CACpBf,GAAQ,EACRiB,EAAY,EACZE,EAAU,EAEVrB,EAAYC,EAAOC,CAAI,EACpB,KAAKoB,GAAQ,CACZb,EAAca,EAAK,IAAI,EAEnBpB,EAAOY,GAAWC,GACpBI,EAAY,EACZI,EAAc,GAEdC,EAAY,CAEhB,CAAC,EACA,MAAM,IAAM,MAAM,eAAe,CAAC,EAClC,QAAQC,CAAU,CACvB,CAEA,SAASJ,GAAa,CACpBV,EAAO,UAAU,OAAO,QAAQ,CAClC,CACA,SAASc,GAAa,CACpBd,EAAO,UAAU,IAAI,QAAQ,CAC/B,CACA,SAASa,GAAe,CACtBZ,EAAY,UAAU,OAAO,QAAQ,CACvC,CACA,SAASO,GAAe,CACtBP,EAAY,UAAU,IAAI,QAAQ,CACpC,CACA,SAASW,GAAiB,CACxBV,EAAW,UAAU,OAAO,QAAQ,CACtC,CACA,SAASO,GAAiB,CACxBP,EAAW,UAAU,IAAI,QAAQ,CACnC"}