{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"53361153-f145cef477c4ac6c9fc0f0a0c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      (img) => `\n      <div class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\">\n          <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n        </a>\n      </div>`\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  document.querySelector(\".loader\").classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n  document.querySelector(\".loader\").classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector(\".load-more\").classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector(\".load-more\").classList.add(\"is-hidden\");\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport {\n  clearGallery,\n  renderImages,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".search-form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onFormSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  hideLoadMoreButton();\n  hideLoader();\n\n  query = e.currentTarget.query.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"The search field cannot be empty.\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: \"Warning\",\n        message:\n          \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    renderImages(data.hits);\n\n    if (data.totalHits > 15) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  hideLoadMoreButton();\n  showLoader();\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page);\n    renderImages(data.hits);\n\n    if (page * 15 >= totalHits) {\n      iziToast.info({\n        title: \"Info\",\n        message: \"We’re sorry, but you’ve reached the end of search results.\",\n        position: \"topRight\",\n      });\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Failed to load more images.\",\n      position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","gallery","lightbox","SimpleLightbox","clearGallery","renderImages","images","markup","img","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","totalHits","onFormSubmit","onLoadMore","e","iziToast","data"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAM,CAC7C,MAAMC,EAAS,CACb,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAGE,OADiB,MAAME,EAAM,IAAIL,EAAU,CAAE,OAAAI,EAAQ,GACrC,IAClB,CCfA,MAAME,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,GAAe,CAC7BH,EAAQ,UAAY,EACtB,CAEO,SAASI,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACEE,GAAQ;AAAA;AAAA,mBAEIA,EAAI,aAAa;AAAA,sBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,aAGxD,EACK,KAAK,EAAE,EAEVP,EAAQ,mBAAmB,YAAaM,CAAM,EAE9CL,EAAS,QAAO,CAClB,CAEO,SAASO,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,WAAW,CAChE,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,WAAW,CAC7D,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,YAAY,EAAE,UAAU,OAAO,WAAW,CACnE,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,WAAW,CAChE,CC5BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIjB,EAAQ,GACRC,EAAO,EACPiB,EAAY,EAEhBF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CF,EAAY,iBAAiB,QAASG,CAAU,EAEhD,eAAeD,EAAaE,EAAG,CAQ7B,GAPAA,EAAE,eAAc,EAEhBN,EAAkB,EAClBF,EAAU,EAEVb,EAAQqB,EAAE,cAAc,MAAM,MAAM,KAAI,EAEpC,CAACrB,EAAO,CACVsB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACT,SAAU,UAChB,CAAK,EACD,MACF,CAEArB,EAAO,EACPM,EAAY,EACZK,EAAU,EAEV,GAAI,CACF,MAAMW,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAE1C,GAAIsB,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,QAAQ,CACf,MAAO,UACP,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACF,CAEAJ,EAAYK,EAAK,UACjBf,EAAae,EAAK,IAAI,EAElBA,EAAK,UAAY,IACnBT,EAAkB,CAEtB,MAAgB,CACdQ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yCACT,SAAU,UAChB,CAAK,CACH,QAAC,CACCT,EAAU,CACZ,CACF,CAEA,eAAeO,GAAa,CAC1BL,EAAkB,EAClBH,EAAU,EACVX,GAAQ,EAER,GAAI,CACF,MAAMsB,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAC1CO,EAAae,EAAK,IAAI,EAElBtB,EAAO,IAAMiB,GACfI,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,EACDP,EAAkB,GAElBD,EAAkB,CAEtB,MAAgB,CACdQ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,CACH,QAAC,CACCT,EAAU,CACZ,CACF"}